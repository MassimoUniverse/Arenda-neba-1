# Управление популярными карточками

## Новые поля в базе данных

Добавлены 3 новых поля в таблицу `services`:

1. **`is_popular`** (INTEGER, default: 0)
   - `0` = обычная техника
   - `1` = отображается в секции "Популярная техника"

2. **`popular_order`** (INTEGER, default: 0)
   - Порядок отображения в секции популярных карточек
   - Меньшее число = выше в списке

3. **`card_bullets`** (TEXT, JSON array)
   - Массив из 4 пунктов для отображения на карточке
   - Формат: `["Пункт 1", "Пункт 2", "Пункт 3", "Пункт 4"]`
   - Пример: `["Высота подъёма: 29 м", "Вылет стрелы: до 14 м", "Грузоподъёмность: 200 кг", "Проезд в арку: 3300 мм"]`

## API Endpoints

### GET /api/popular-cards
Возвращает только технику с `is_popular = 1`, отсортированную по `popular_order`.

### POST /api/admin/services
Создание новой техники с поддержкой популярных карточек.

Новые параметры:
- `is_popular`: 0 или 1
- `popular_order`: число для сортировки
- `card_bullets`: массив из 4 строк

### PUT /api/admin/services/:id
Обновление техники с поддержкой популярных карточек.

## Как использовать в админ-панели

### Шаг 1: Отметить технику как популярную
1. Откройте админ-панель
2. Выберите технику для редактирования
3. Установите чекбокс "Популярная техника"
4. Укажите порядок отображения (1, 2, 3, 4...)

### Шаг 2: Настроить пункты для карточки
В поле "Пункты для карточки" введите 4 пункта (по одному на строку):
```
Высота подъёма: 29 м
Вылет стрелы: до 14 м
Грузоподъёмность: 200 кг
Проезд в арку: 3300 мм
```

### Шаг 3: Сохранить
Нажмите "Сохранить" - техника появится в секции "Популярная техника" на главной странице.

## Пример данных

```json
{
  "id": 1,
  "title": "Автовышка 29 метров",
  "description": "Мощная техника для высотных работ",
  "price": "от А 26 000 ₽/смена",
  "is_popular": 1,
  "popular_order": 4,
  "card_bullets": [
    "Высота подъёма: 29 м",
    "Вылет стрелы: до 14 м",
    "Грузоподъёмность: 200 кг",
    "Проезд в арку: 3300 мм"
  ]
}
```

## Fallback механизм

Если `card_bullets` пустой или содержит меньше 4 пунктов, система автоматически использует данные из `POPULAR_EQUIPMENT_SLIDES` в `public/script.js`.

## Миграция существующих данных

После обновления кода выполните:
```bash
node update-popular-cards.js
```

Это добавит новые колонки в базу данных и установит значения по умолчанию.
