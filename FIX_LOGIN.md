# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
2. –ù–∞–∂–º–∏—Ç–µ **F12** (–æ—Ç–∫—Ä—ã—Ç—å DevTools)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–∫–∏–µ –æ—à–∏–±–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è

### 2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω–∞:

```bash
cd /opt/arenda-neba

# –°–æ–∑–¥–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
cat > check-admin.js << 'EOF'
const sqlite3 = require('sqlite3').verbose();
const bcrypt = require('bcryptjs');

const db = new sqlite3.Database('./database.db');

db.get('SELECT * FROM admins WHERE username = ?', ['admin'], async (err, admin) => {
  if (err) {
    console.error('‚ùå –û—à–∏–±–∫–∞:', err);
    db.close();
    return;
  }

  if (!admin) {
    console.log('‚ö†Ô∏è  –ê–¥–º–∏–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω! –°–æ–∑–¥–∞–µ–º...');
    const hash = await bcrypt.hash('admin123', 10);
    db.run('INSERT INTO admins (username, password_hash) VALUES (?, ?)', ['admin', hash], (err) => {
      if (err) console.error('‚ùå –û—à–∏–±–∫–∞:', err);
      else console.log('‚úÖ –ê–¥–º–∏–Ω —Å–æ–∑–¥–∞–Ω! Username: admin, Password: admin123');
      db.close();
    });
  } else {
    console.log('‚úÖ –ê–¥–º–∏–Ω –Ω–∞–π–¥–µ–Ω');
    const valid = await bcrypt.compare('admin123', admin.password_hash);
    console.log('–ü–∞—Ä–æ–ª—å "admin123" –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:', valid);
    db.close();
  }
});
EOF

node check-admin.js
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:

```bash
pm2 logs arenda-neba --lines 50
```

–ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏:
- `üîê Login attempt:`
- `‚ùå Database error:`
- `‚ùå Invalid credentials`

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç
curl http://localhost:3000/api/admin/login -X POST -H "Content-Type: application/json" -d '{"username":"admin","password":"admin123"}'
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å —Ç–æ–∫–µ–Ω–æ–º –∏–ª–∏ –æ—à–∏–±–∫—É.

### 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:

```bash
pm2 restart arenda-neba
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ê–¥–º–∏–Ω –Ω–µ —Å–æ–∑–¥–∞–Ω –≤ –±–∞–∑–µ** - –∑–∞–ø—É—Å—Ç–∏—Ç–µ `check-admin.js`
2. **–°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PM2 –∑–∞–ø—É—â–µ–Ω
3. **CORS –æ—à–∏–±–∫–∏** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
4. **JavaScript –æ—à–∏–±–∫–∏** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

## –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

–Ø –æ–±–Ω–æ–≤–∏–ª –∫–æ–¥ - —Ç–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –±—É–¥–µ—Ç –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—Ö–æ–¥–µ.

–ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```bash
cd deploy
git add public/admin-script.js FIX_LOGIN.md
git commit -m "–£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"
git push origin main
```

