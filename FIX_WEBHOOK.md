# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞

## –ü—Ä–æ–±–ª–µ–º–∞
–í–µ–±—Ö—É–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º `test.txt` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /opt/arenda-neba

# 1. –£–¥–∞–ª–∏—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–π —Ñ–∞–π–ª
rm -f test.txt

# 2. –û–±–Ω–æ–≤–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤—Ä—É—á–Ω—É—é
git pull origin main

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ webhook-handler
pm2 restart webhook-handler

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pm2 logs webhook-handler --lines 20
```

## –Ø –æ–±–Ω–æ–≤–∏–ª deploy.sh

–¢–µ–ø–µ—Ä—å `deploy.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç `test.txt` –ø–µ—Ä–µ–¥ pull. –ü–æ—Å–ª–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—É—à–∞ –≤–µ–±—Ö—É–∫ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å.

### –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π deploy.sh:

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
cd deploy
git add deploy.sh FIX_WEBHOOK.md
git commit -m "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω deploy.sh –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤"
git push origin main
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤–µ–±—Ö—É–∫–∞:

–ü–æ—Å–ª–µ –ø—É—à–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
pm2 logs webhook-handler --lines 30
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üîÑ Webhook received: push to main branch
‚úÖ Deploy output: ...
üöÄ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π...
üì• –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ Git...
‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!
```

## –ï—Å–ª–∏ –≤–µ–±—Ö—É–∫ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ webhook-handler –∑–∞–ø—É—â–µ–Ω:
   ```bash
   pm2 status webhook-handler
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–±—Ö—É–∫–∞ –Ω–∞ GitHub:
   - –ó–∞–π–¥–∏—Ç–µ: https://github.com/MassimoUniverse/Arenda-neba-1/settings/hooks
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ (Recent Deliveries)
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—Ä—Ç 3001 –æ—Ç–∫—Ä—ã—Ç:
   ```bash
   ss -tulpn | grep 3001
   ```

