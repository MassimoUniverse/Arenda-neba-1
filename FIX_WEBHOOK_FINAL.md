# üîß –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞

## –ü—Ä–æ–±–ª–µ–º–∞
–í–µ–±—Ö—É–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å `test.txt`.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–≤—ã–ø–æ–ª–Ω–∏—Ç–µ –°–ï–ô–ß–ê–°):

```bash
cd /opt/arenda-neba

# 1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç–µ Git —Å–æ—Å—Ç–æ—è–Ω–∏–µ
git reset --hard HEAD
git clean -fd

# 2. –£–¥–∞–ª–∏—Ç–µ test.txt –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
rm -f test.txt
git rm --cached test.txt 2>/dev/null || true

# 3. –û–±–Ω–æ–≤–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git pull origin main

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ webhook-handler
pm2 restart webhook-handler
```

## –Ø –æ–±–Ω–æ–≤–∏–ª deploy.sh

–¢–µ–ø–µ—Ä—å `deploy.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –£–¥–∞–ª—è–µ—Ç `test.txt`
- –£–¥–∞–ª—è–µ—Ç –µ–≥–æ –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ Git
- –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –û—á–∏—â–∞–µ—Ç –Ω–µ–æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã

### –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π deploy.sh:

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
cd deploy
git add deploy.sh FIX_WEBHOOK_FINAL.md
git commit -m "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω deploy.sh –¥–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤"
git push origin main
```

## –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

–í–µ–±—Ö—É–∫ –¥–æ–ª–∂–µ–Ω –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º push:
1. `deploy.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—Å—Ç–∏—Ç –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
2. `git pull` –ø—Ä–æ–π–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ
3. –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## –ü—Ä–æ–≤–µ—Ä–∫–∞:

–ü–æ—Å–ª–µ –ø—É—à–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
pm2 logs webhook-handler --lines 30
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üîÑ Webhook received: push to main branch
‚úÖ Deploy output: ...
üöÄ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π...
üì• –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ Git...
‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!
```

